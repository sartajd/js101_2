<html>
    <head>
        <title>Infinite</title>

        <script src="./api.js"></script>
        <script src="./myLibrary.js"></script>
    </head>
    <body>

        <div id="posts">

        </div>
        
        <script>
            const COUNT = 10
            let start = 1;

            loadPosts(start)
            start = start + COUNT

            // if at bottom, load then more posts
            window.onscroll = function(){
                if(isAtBottom()){
                    loadPosts(start)
                    start = start + COUNT
                }
            }

            
            function loadPosts(start){      
                console.log("loadPosts") 
                // load ten posts
                for(let i = start; i < start + COUNT; i++){
                    loadPost(i)
                }
            }

            function loadPost(id){
                console.log("loadpost")
                // get post from server, add it to DOM
                getPost(id)
                .then(post => {
                    // create h1 and add post to it
                    const h1 = document.createElement("h1")
                    h1.innerHTML = post
                    document.querySelector("#posts").appendChild(h1)
                })
            }
        </script>
    </body>
</html>